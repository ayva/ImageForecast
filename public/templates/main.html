<!--Total photos {{featured.cities.data.length}}-->
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>

    <script>
        angular.element(document).ready(function () {
            var chosenMonth = $("[data-month='" + getCurrentMonth() + "']")[0],
                    day = getCurrentDay(),
                    month = getCurrentMonth(),
                    date = day + ' ' + month,
                    days = 30,
                    dayWidth = 720 / days;

            $("[data-slider]").each(function () {
                var $el, allowedValues, settings, x;
                $el = $(this);
                settings = {};
                allowedValues = $el.data("slider-values");
                if (allowedValues) {
                    settings.allowedValues = (function () {
                        var _i, _len, _ref, _results;
                        _ref = allowedValues.split(",");
                        _results = [];
                        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                            x = _ref[_i];
                            _results.push(parseFloat(x));
                        }
                        return _results;
                    })();
                }
                if ($el.data("slider-range")) {
                    settings.range = $el.data("slider-range").split(",");
                }
                if ($el.data("slider-step")) {
                    settings.step = $el.data("slider-step");
                }
                settings.snap = $el.data("slider-snap");
                return $el.simpleSlider(settings);
            });

            $("#slider-input")
                    .each(function () {
                        var input = $(this);
                    })
                    .bind("slider:ready slider:changed", function (event, data) {
                        day = data.value.toFixed(0);
                        $($('.output')[0]).html(day + ' ' + $(chosenMonth).text());
                    });

            $('.mnth-button').on('click', function () {
                if ($('.clicked')[0]) {
                    $('.clicked')[0].className = 'mnth-button';
                }
                this.className = 'clicked';
                chosenMonth = $('.clicked')[0];
                $($('.output')[0]).html(day + ' ' + $(chosenMonth).text());
            });

            function getCurrentMonth() {
                var monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN",
                    "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"
                ];

                var d = new Date();
                return monthNames[d.getMonth()];
            }

            function getCurrentDay() {
                var d = new Date();
                return d.getDate();
            }


            function daysInSlider(days) {
                for (var i = 1; i <= days; i++) {
                    $($('.days-list')[0]).append('<li class=\'days\' style=\'width:' + dayWidth + 'px;\'>' + i + '</li>');
                }
            }

            function wrapFirstPhoto() {
                var cl = $('#photo-1')[0].className;
                $('#photo-1')[0].className = cl + ' w-hide';
                $('.w-hide').wrapAll('<div class = \'weather-hide\'></div>');
            }

            chosenMonth.className = 'clicked';
            $($(".output")[0]).text(date);
            $("#slider-input").simpleSlider("setValue", day);

            daysInSlider(days);
            setTimeout(wrapFirstPhoto, 2000);
        });
    </script>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="fullscreen-bg">
            <video loop muted autoplay poster="" class="fullscreen-bg__video">
                <source ng-src="/statics/video/headerVideo.ogv" type="video/ogg">
            </video>
        </div>
        <div class="nav">
            <div class="logo">FUTUGRAMM</div>
            <button class="sign">SIGN IN</button>
        </div>
        <p class="explanation">Futugramm shows how it will look in the coming year through the eyes of those,
            who already have been there. Select a city, a date of a planned trip, and a point on map.</p>

        <form class="form-inline" ng-model="searchForm" ng-submit="showForecast()">
            <div class="cityInput">
                <input type="text"
                       required="string"
                       uib-typeahead="place.name for place in geo.places"
                       typeahead-no-results="noResults"
                       typeahead-append-to-body="true"
                       typeahead-on-select="searchForm.place = $item"
                       ng-model="place"
                       ng-change="getPlaces(place)"
                       class="input"
                       ng-value="search.place"
                       autocomplete="off">
                <button type="submit" class="button">GO</button>
            </div>
            <div class="slider-wrapper">
                <div class="months">
                    <button type='button' class="mnth-button" data-month='JAN'>JAN</button>
                    <button type='button' class="mnth-button" data-month='FEB'>FEB</button>
                    <button type='button' class="mnth-button" data-month='MAR'>MAR</button>
                    <button type='button' class="mnth-button" data-month='APR'>APR</button>
                    <button type='button' class="mnth-button" data-month='MAY'>MAY</button>
                    <button type='button' class="mnth-button" data-month='JUN'>JUN</button>
                    <button type='button' class="mnth-button" data-month='JUL'>JUL</button>
                    <button type='button' class="mnth-button" data-month='AUG'>AUG</button>
                    <button type='button' class="mnth-button" data-month='SEP'>SEP</button>
                    <button type='button' class="mnth-button" data-month='OCT'>OCT</button>
                    <button type='button' class="mnth-button" data-month='NOV'>NOV</button>
                    <button type='button' class="mnth-button" data-month='DEC'>DEC</button>
                </div>
                <input type="text" data-slider="true" id="slider-input" data-slider-range="1,30" data-slider-step="1"
                       data-slider-snap="true">

                <div>
                    <ul class="days-list"></ul>
                </div>
                <div><span class="output"></span></div>
            </div>

        </form>
    </div>
    <div class="map-wrapper">
        <div id="map"></div>
    </div>
    <div class="photoBlock">
        <h4 class="text-center" ng-if="featured.cities.data.length == 0 ">No photos for this place. Try another date or
            place.</h4>

        <div class="row" id='photos'>
            <div class="weather-block-wrapper col-md-4">
                <div class="weather-block w-hide thumbnail">
                    <div class="weather-info">
                        <img class="weatherIcon" ng-src="/statics/images/sun-cloud.png">

                        <div class="degrees">
                            <p class="fahrenheits">63 ºF</p>

                            <p class="celsius">(17 ºC)</p>
                        </div>

                        <div class="conditions">Mostly Cloudy</div>
                    </div>
                </div>
            </div>
            <div id="photo-{{$index+1}}" class="col-md-4"
                 ng-repeat="photo in featured.cities.data | orderBy: '-likes.count' ">
                <a href={{photo.link}} class="thumbnail">
                    <img ng-src='{{photo.images.thumbnail.url}}'>
                </a>
            </div>
        </div>
    </div>
</div>
<footer>
    <span class="copyright">Copyright © 2015 Futugramm Inc. All rights reserved.</span>

    <div class="rightBlock">
        <a href="#" class="about">About</a>
        <a href="#" class="follow">Follow us<img class="instIcon" ng-src="/statics/images/instagram.png"></a>
    </div>
</footer>
</div>
</body>
</html>




